<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Выполнение тестового задания</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"></script>
    <link rel="stylesheet" type="text/css" href="styles/main.min.css">
    <script src="scripts/test.js"></script>
</head>
<body>
    <div class="container">
        <h1>Каталог сотрудников</h1>
        <div id="content"></div>
    </div>



    <script type="text/babel">
        

        var Departments = React.createClass({
            getInitialState: function() {
                init_object(this);
                return {
                    displayedDepartments: mContentArray
                };
            },
            departmentsClick: function(event) {
                processEvent(event);

                var displayedDepartments = mContentArray;
                
                if (event != undefined)
                    this.setState({
                        displayedDepartments: displayedDepartments
                });
            },
            render: function() {
                var that = this;
                if (mId[0] == 0)
                {
                    return (
                        <div>
                            <p>Список отделов</p>
                            <table className="table table-striped"> 
                                <thead><tr><th>Название</th></tr></thead> 
                                <tbody> 
                                    {
                                        mContentArray.map(function(el) {
                                            return <tr key={el.id}><td><a href="javascript:void(0)" id={"dep_"+el.id} onClick={that.departmentsClick}  >{el.name}</a></td></tr>;
                                        })
                                    }
                            
                                </tbody> 
                            </table>
                        </div>
                    );
                }
                else if(mId[0] == 1)
                {
                    return (
                        <div>                          
                            <p>
                                <a id="main_0" href="javascript:void(0)" onClick={that.departmentsClick}>Список отделов</a>&nbsp;»&nbsp;{mDepartmentName} [{mDepartmentQuantity}]
                            </p>
                            <table className="table table-striped"> 
                                <thead><tr><th>ФИО</th></tr></thead>
                                <tbody> 
                                    {
                                        mContentArray.map(function(el) {
                                            return <tr key={el.id}><td><a href="javascript:void(0)" id={"empl_"+el.id} onClick={that.departmentsClick} >{el.name}</a></td></tr>;
                                        })
                                    }
                                </tbody> 
                            </table>
                        </div>
                    );
                }
                else if (mId[0] == 2)
                {
                    return (
                        <div>
                            <p>
                                <a id="main_0" href="javascript:void(0)" onClick={that.departmentsClick}>Список отделов</a>&nbsp;»&nbsp;
                                <a id={"dep_"+mDepartmentNumber} href="javascript:void(0)" onClick={that.departmentsClick}>{mDepartmentName+" ["+mDepartmentQuantity+"]"}</a>&nbsp;»&nbsp;
                                {mEmployerName}
                            </p>
                            <table className="table table-striped"> 
                                <thead><tr><th>Фотография</th><th>ФИО</th><th>Телефон</th></tr></thead> 
                                <tbody>
                                    {
                                        mContentArray.map(function(el) {
                                            return (
                                            <tr key={el.id}>
                                                <td><img src={mPhoto} /></td> 
                                                <td>{el.name}</td> 
                                                <td>{el.phone}</td> 
                                            </tr>
                                            );
                                        })
                                    } 
                                </tbody> 
                            </table>
                        </div>
                    );
                }
                else
                {
                    return (
                    <div className="download-bar">
                        <div className="image"></div>
                        <div className="title">Загружаются данные</div> 
                    </div>
                    );
                }
                
            }
        });

        ReactDOM.render(
            <Departments />,
            document.getElementById('content')
        );
    </script>
</body>